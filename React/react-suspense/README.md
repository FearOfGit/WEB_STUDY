## React v18 - Suspense

- 리액트 버전18.0부터 정식 기능으로 채택 되었다.

- 컴포넌트를 `Suspense`로 감싸주면 컴포넌트의 랜더링을 특정 작업 이후로 미루고, 그 작업이 끝날 때까지 `fallback` 속성으로 넘긴 컴포넌트를 대신 보여줄 수 있다.

- 주로 네트워크를 통해 비동기로 데이터를 가져오는 작업을 기다릴 때 `return` 으로 작성하는 명령형 코드 대신 사용할 수 있다.

- 한 페이지 상의 여러 컴포넌트에서 동시에 비동기 데이터를 읽어오는 경우, UI가 마치 폭포처럼 순차적으로 나타나는 현상을 해결할 수 있다.

- 기존의 `return` 문을 통한 랜더링 방식은 초기 랜더링 후에 데이터 로딩 후 다시 랜더링을 수행하기 때문에 경쟁 상태에도 취약하다.

- 리액트 18버전부터 `StrictMode`에서 `useEffect`가 기본적으로 두 번씩 호출됨에 따라 `useEffect`는 api를 호출하기 더욱 적합하지 않은 장소가 되었다.

- render as you fetch 패턴을 사용하여 api를 호출한다.

### react-query와 Suspense
